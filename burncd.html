<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<meta http-equiv="Content-Language" content="ru">
<meta name="copyright" content="Copyright (c) 2005-2006 by OpenBSD.ru">
<title>OpenBSD: Изготовление дистрибутивного CD</title>
<link rel="stylesheet" type="text/css" href="style.css" tppabs="http://www.openbsd.ru/style.css">
</head>

<body>

<h2>OpenBSD: Изготовление дистрибутивного CD</h2>
<hr>

<h3>Мини-руководство "шаг за шагом"</h3>

<p>
<table border=0>
<tr><td>

<p>
Чтобы подготовить ISO-образ и записать его на CD-R(W), сначала необходимо 
создать дистрибутив, как описано в <a href="release.html" tppabs="http://www.openbsd.ru/docs/steps/release.html">руководстве</a>
&quot;OpenBSD: Сборка дистрибутива&quot;, а затем выполнить следующую
последовательность команд.

<p>
С помощью переменных окружения указываем абсолютные пути до каталогов:

<pre>
# <strong>export RELEASEDIR=/home/openbsd/release</strong>
# <strong>export IMAGEDIR=/home/openbsd/image/4.2/i386</strong>
</pre>

<p>
Создаем директорию для дистрибутивных файлов:

<pre>
# <strong>mkdir -p ${IMAGEDIR}</strong>
</pre>

<p>
Копируем файлы из созданного нами релиза:

<pre>
# <strong>cp ${RELEASEDIR}/* ${IMAGEDIR}</strong>
</pre>

<p>
Создаем загрузочный образ:

<pre>
# <strong>cd /home/openbsd</strong>
# <strong>mkhybrid -b 4.2/i386/cdbr -c boot.catalog \
	-lrvDJLN -hide boot.catalog -hide-joliet boot.catalog \
	-V &quot;OpenBSD 4.2&quot; -o obsd42.iso image</strong>
</pre>

<p>
При необходимости устанавливаем <tt>cdrecord</tt> из портов:

<pre>
# <strong>cd /usr/ports/sysutils/cdrtools</strong>
# <strong>make install clean CLEANDEPENDS=Yes</strong>
</pre>

<p>
Или с помощью прекомпилированного пакета:

<pre>
# <strong>pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/4.2/packages/i386/cdrtools-2.01p0.tgz</strong>
</pre>

<p>
Необязательный шаг: проверка возможности записи (прожиг не выполняется):

<pre>
# <strong>cdrecord -v -tao -dummy dev=/dev/rcd0c obsd42.iso</strong>
</pre>

<p>
Записываем полученный образ на CD-R(W):

<pre>
# <strong>cdrecord -v -tao dev=/dev/rcd0c obsd42.iso</strong>
</pre>

<p>
При необходимости указанные переменные окружения можно удалить:

<pre>
# <strong>unset RELEASEDIR IMAGEDIR</strong>
</pre>

</td></tr>
</table>

<p>
<hr>
<a href="javascript:if(confirm('http://www.openbsd.ru/docs/steps/index.html  \n\nThis file was not retrieved by Teleport Ultra, because it is linked too far away from its Starting Address. If you increase the in-domain depth setting for the Starting Address, this file will be queued for retrieval.  \n\nDo you want to open it from the server?'))window.location='http://www.openbsd.ru/docs/steps/index.html'" tppabs="http://www.openbsd.ru/docs/steps/index.html"><img height=24 width=24 src="back.gif" tppabs="http://www.openbsd.ru/images/back.gif" alt="OpenBSD.ru"></a>
<a href="mailto:www@openbsd.ru">www@openbsd.ru</a>
<br>
<small>$RuOBSD: burncd.html,v 1.13 2010/11/01 10:57:48 dinar Exp $</small>

</body>
</html>
