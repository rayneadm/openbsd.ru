<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<meta http-equiv="Content-Language" content="ru">
<meta name="copyright" content="Copyright (c) 2005 by OpenBSD.ru">
<title>OpenBSD: Работа в качестве DHCP-сервера</title>
<link rel="stylesheet" type="text/css" href="style.css" tppabs="http://www.openbsd.ru/style.css">
</head>

<body>

<h2>OpenBSD: Работа в качестве DHCP-сервера</h2>
<hr>

<h3>Мини-руководство "шаг за шагом"</h3>

<p>
<table border=0>
<tr><td>

<p>
Создаем файл конфигурации <tt>dhcpd</tt>:

<pre>
# <strong>vi /etc/dhcpd.conf</strong>

#authoritative;
#deny bootp;
#deny unknown-clients;
#default-lease-time 86400;
#max-lease-time 86400;

option domain-name "online.ptt.ru";
option domain-name-servers 212.188.4.10;

shared-network wired {

	subnet 192.168.1.0 netmask 255.255.255.0 {
		option routers 192.168.1.1;
	}

	host client1 {
		hardware ethernet 00:08:02:d6:9e:44;
		fixed-address 192.168.1.2;
		filename "pxeboot";
	}

	range 192.168.1.10 192.168.1.250;
}

shared-network wireless {

	subnet 192.168.2.0 netmask 255.255.255.0 {
		option routers 192.168.2.1;
	}

	host aurora {
		hardware ethernet 00:80:c8:2c:47:a1;
		fixed-address 192.168.2.2;
	}

	range 192.168.2.10 192.168.2.20;
}
</pre>

<p>
Запускаем <tt>dhcpd</tt>:

<pre>
# <strong>/usr/sbin/dhcpd fxp0 ral0</strong>
</pre>

<p>
Для проверки работоспособности демона можно воспользоваться следующей командой:

<pre>
% <strong>pgrep -lf dhcp</strong>
3623 /usr/sbin/dhcpd fxp0 ral0
</pre>

<p>
В <span>/etc/rc.conf</span> прописываем автозапуск <tt>dhcpd</tt>:

<pre>
# <strong>vi /etc/rc.conf</strong>
dhcpd_flags=""
</pre>

<p>
В <span>/etc/dhcpd.interfaces</span> перечисляем сетевые
интерфейсы, участвующие в работе <tt>dhcpd</tt>:

<pre>
# <strong>echo 'fxp0 ral0' &gt;&gt; /etc/dhcpd.interfaces</strong>
</pre>

</td></tr>
</table>

<p>
<hr>
<a href="javascript:if(confirm('http://www.openbsd.ru/docs/steps/index.html  \n\nThis file was not retrieved by Teleport Ultra, because it is linked too far away from its Starting Address. If you increase the in-domain depth setting for the Starting Address, this file will be queued for retrieval.  \n\nDo you want to open it from the server?'))window.location='http://www.openbsd.ru/docs/steps/index.html'" tppabs="http://www.openbsd.ru/docs/steps/index.html"><img height=24 width=24 src="back.gif" tppabs="http://www.openbsd.ru/images/back.gif" alt="OpenBSD.ru"></a>
<a href="mailto:www@openbsd.ru">www@openbsd.ru</a>
<br>
<small>$RuOBSD: dhcpd.html,v 1.9 2010/11/01 10:57:48 dinar Exp $</small>

</body>
</html>
