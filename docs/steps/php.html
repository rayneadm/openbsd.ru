<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<meta http-equiv="Content-Language" content="ru">
<meta name="copyright" content="Copyright (c) 2005 by OpenBSD.ru">
<title>Apache: Устанавливаем PHP</title>
<link rel="stylesheet" type="text/css" href="../../style.css">
</head>

<body>

<h2>Apache: Устанавливаем PHP</h2>
<hr>

<h3>Мини-руководство "шаг за шагом"</h3>

<p>
<table border=0>
<tr><td>

<p>
Через переменную окружения указываем путь к прекомпилированным пакетам:

<pre>
# <strong>export PKG_PATH=ftp://ftp.openbsd.org/pub/OpenBSD/3.8/packages/i386/</strong>
</pre>

<p>
Устанавливаем базовый пакет PHP4:

<pre>
# <strong>pkg_add php4-core-4.4.1p0.tgz</strong>
</pre>

<p>
В случае PHP5:

<pre>
# <strong>pkg_add php5-core-5.0.4p0.tgz</strong>
</pre>

<p>
С помощью команды <tt>phpxs</tt> активируем php-модуль:

<pre>
# <strong>/usr/local/sbin/phpxs -s</strong>
</pre>

<p>
Воспользуемся рекомендованной разработчиками версией
<span>php.ini</span>:

<pre>
# <strong>cp /usr/local/share/examples/php4/php.ini-recommended /var/www/conf/php.ini</strong>
</pre>

<p>
В случае PHP5:

<pre>
# <strong>cp /usr/local/share/examples/php5/php.ini-recommended /var/www/conf/php.ini</strong>
</pre>

<p>
Выставляем корректные права доступа для <span>php.ini</span>:

<pre>
# <strong>chown root:www /var/www/conf/php.ini</strong>
# <strong>chmod 640 /var/www/conf/php.ini</strong>
</pre>

<p>
Следующие строки в главном конфигурационном файле Apache должны быть
раскомментированы:

<pre>
# <strong>vi /var/www/conf/httpd.conf</strong>
#В случае PHP4:
LoadModule php4_module modules/libphp4.so

#В случае PHP5:
LoadModule php5_module modules/libphp5.so

DirectoryIndex index.html index.php
AddType application/x-httpd-php .php .inc
</pre>

<p>
Устанавливаем набор классов PHP4 общего назначения:

<pre>
# <strong>pkg_add php4-pear-4.4.1p0.tgz</strong>
</pre>

<p>
В случае PHP5:

<pre>
# <strong>pkg_add php5-pear-5.0.4.tgz</strong>
</pre>

<p>
Устанавливаем специальное расширение для поддержки MySQL:

<pre>
# <strong>pkg_add php4-mysql-4.4.1p0.tgz</strong>
</pre>

<p>
В случае PHP5:

<pre>
# <strong>pkg_add php5-mysql-5.0.4.tgz</strong>
</pre>

<p>
Активируем mysql-модуль:

<pre>
# <strong>/usr/local/sbin/phpxs -a mysql</strong>
</pre>

<p>
Устанавливаем специальное расширение для поддержки IMAP:

<pre>
# <strong>pkg_add php4-imap-4.4.1p0.tgz</strong>
</pre>

<p>
В случае PHP5:

<pre>
# <strong>pkg_add php5-imap-5.0.4.tgz</strong>
</pre>

<p>
Активируем imap-модуль:

<pre>
# <strong>/usr/local/sbin/phpxs -a imap</strong>
</pre>

<p>
Чтобы проверить работу PHP, создаем файл <span>test.php</span>:

<pre>
# <strong>echo '&lt;?php phpinfo() ?&gt;' &gt; /var/www/htdocs/test.php</strong>
</pre>

<p>
Выполняем останов и повторный запуск
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a>:

<pre>
# <strong>apachectl stop</strong>
# <strong>apachectl start</strong>
</pre>

<p>
Вот так можно получить информацию о совместной работе PHP и Apache:

<pre>
% <strong>lynx http://localhost/test.php</strong>
</pre>

</td></tr>
</table>

<p>
<hr>
<a href="index.html"><img height=24 width=24 src="../../images/back.gif" alt="OpenBSD.ru"></a>
<a href="mailto:www@openbsd.ru">www@openbsd.ru</a>
<br>
<small>$RuOBSD: php.html,v 1.12 2010/11/01 10:57:48 dinar Exp $</small>

</body>
</html>
